Test data for Tony

Internal review
===============

If you've already conducted an internal review, at all places 
- when on unhappy/url
- when on not held link
- on the page for the request
don't offer it again.

Clock for internal review
    The Information Commissioner has issued a "Good Practice Guidance" document:
    http://www.ico.gov.uk/upload/documents/library/freedom_of_information/detailed_specialist_guides/foi_good_practice_guidance_5.pdf
    Reviews are meant to be carried out "as quickly as possible", and they
    suggest 20 working days as a reasonable limit. In exceptional cases they
    accept it may take longer, but recommend informing the requester in such
    a case as to why. They do not believe it should ever take longer than 40
    days.
Fix up the text: "The internal review should take 2-3 weeks for simple cases,
and up to 6 weeks even for complex reviews."

Awaiting internal review overdue state?

Search for text "internal review" in followups and add warning if they aren't
using the internal review mode.

Make the text of internal review have a bit that you have to edit.

Next
====

For followups, have radio button to say is it a new request or followup?
Finish "new information" option when writing followup, so makes new request

Let people change status at any point
Let admin users set things to internal review more easily

Make it so you definitely don't get alert for the annotation that you just made

Performance:
    Remove loading of public body tags from every info request load
        Completed in 15.53564 (0 reqs/sec) | Rendering: 1.03024 (6%) | DB: 14.46186 (93%) | 200 OK [http://www.whatdotheyknow.com/body/list/n]
    Make mongrel not single threaded

Upload Julian's large Cambridgeshire contract

Watch these requests that are in internal review state or have been:
    http://www.whatdotheyknow.com/request/communications_from_home_office
    http://www.whatdotheyknow.com/request/community_justice_centre_sentenc

Gone to information commissioner
    http://www.whatdotheyknow.com/request/local_government_ombudsman_2 - appeal to infocom
    http://www.whatdotheyknow.com/request/please_submit_the_surveyors_repo
Clear out all the need admin attention requests

CSS / design things
    - Icon for internal_review
    - CSS error on "all councils" page on some browsers
        https://bugzilla.mozilla.org/show_bug.cgi?id=424194
    - Spacing on error boxes round form elements
    - icons for "Things to do with this request" ?
    - Improve CSS on IE7 for large images in docs
        http://www.whatdotheyknow.com/request/3289/response/7810/attach/html/3/20081023ReplyLetter.pdf.html
    - "fugly" (search email archive) in IE6/XP, Alex Skene can find it

Write code to make sure the Return-Path is never foi@sandwich.org.uk (even if the
  Rails code breaks for Sendmail case in future botched Rails upgrades :)

I still type stuff into notes rather than comments on public body form - not
sure what to do about it.

When writing initial request you have to put your name in the letter to sign it,
but it only explains later about anonymous names, Hmmm.


Later
=====

Rename show_response action to send_followup?

Would be nice if you try and send or resend (from admin interface, or by sending
followup as user) and original address is set to not_apply or "" that it deals
with it better :) 

Include log files from exim in admin interface for each request

When doing search, people often just want it to show the whole page. Perhaps
all listing should just link to top of page, rather than # links for outgoing
incoming, or perhaps just some of them.

Add "I have a large file" to FOI office FAQ
Add "Who should I make my request to?"
Add "I want to file squillions of requests"
Add "I didn't get the email / spam question" and link to from FOI officer upload page
Add "Postal replies stuff" and link to from FOI officer upload page
Add "I'm not sure which authority to make my request to" - make flow better after first section, to abrupt now
I think the advice in this annotation could go into a nice comment:
http://www.whatdotheyknow.com/request/berr_response_to_eu_on_phorm_bt#comment-356

Link the overdue date to an explanation of what bank holidays it skipped etc.
:)

Should probably remove the weekend rule, and be sterner with authorities about
what "received" means. See thread about staff_numbers_and_costs on team@ ad
these two requests:
http://www.whatdotheyknow.com/request/staff_numbers_and_costs
http://www.whatdotheyknow.com/request/policy_regarding_body_scans#incoming-1100

Show similar requests after you have filed yours - maybe on preview too.

Consider putting the request email address in footer? So when
forwarded about, address sticks there.

Knackered view as HTML:
    http://www.whatdotheyknow.com/request/statistics_for_allocation_of_dut#incoming-4793
    http://www.whatdotheyknow.com/request/post_lawrence_report_diversity_t_7#incoming-5483
They are copy protected PDFs. The code in the incoming_message model tries to fix
that by converting them to ps and back, but the content is getting lost when doing, not
sure why. Perhaps instead patch poppler-utils so pdftohtml doesn't respect protection
either (code in pdftotext already has a #ifdef round it)
Another one knackered, and isn't copy protected, but is like the output of
converted via pdf2ps ones I suspect (i.e. very scanned):
    http://www.whatdotheyknow.com/request/sale_of_public_land#incoming-8146
File a bug in pdftohtml :)

Make HTML attachments have view as HTML :)
http://www.whatdotheyknow.com/request/enforced_medication#incoming-7395

Can use track count to show interesting requests
select info_request_id, title, count(*) as c from track_things, info_requests where track_things.info_request_id is not null and track_things.info_request_id = info_requests.id group by info_request_id, title order by c;

Test code for FOI officer upload
Test code for rendering lots of different attachments and filetypes
Test code for internal review submitting

Detect councils that always send automatic acknowledgements, and notice if they
do not for a particular request? (e.g. Leicestershire County Council)

Do conversion tracking on endpoints in WDTK, advertise perhaps TWFY, or perhaps
    donations to mySociety.

http://www.whatdotheyknow.com/list/successful - too many ombudsmans.
    Radical would be to group by user, regardless of subject; less radical to
    collate those with same/similar subject.
http://www.whatdotheyknow.com/list?page=2 - too many monitoring officer
    reports - similar to above, I reckon.

favicon.ico would be nice

Protect from CSRF with this in app controller (care it doesn't break anything):
  # See ActionController::RequestForgeryProtection for details
    # Uncomment the :secret if you're not using the cookie session store
      protect_from_forgery # :secret => '<%= app_secret %>'

Look at quote_address_if_necessary in actionmailer's quoting.rb - why did it
not work for the email address with "@" in its name part?

Search FAQ and other help pages with normal search
    - also the "notes" section on an authority

Jump to a random request :)

VSD files vsdump - example in zip file
    http://www.whatdotheyknow.com/request/dog_control_orders#incoming-3510
    doing file RESPONSE/Internal documents/Briefing with Contact Islington/Contact Islington Flowchart Jul 08.vsd content type 
Search for other extensions that we have now
    (call IncomingMessage.find_all_unknown_mime_types to find them)

From an email, isn't stripping spaces right.
    "Met Office  sent a response to Andrew Montford (14 August 2008)"
Also should group by the request id for search queries (so all appear
together when request and response mention same term)

When indexing .docx do you need to index docProps/custom.xml and docProps/app.xml
as well as word/document.xml ? (thread on xapian-discuss does so)

Something to check which tags are used but aren't in PublicBody category lists

When described state is edited in admin interface, automatically reset the flag
for needs classification.

Public body tags should perhaps be forced to be lowercase only :)

In sidebar of request 
    Share this request on Facebook, by email etc.
     Try using James Smith's plugin for this: http://github.com/Floppy/rubymarks/tree/master
    Email icon here: http://www.guardian.co.uk/news/video/2008/apr/03/mugabe
    Simple Digg style "I like this request" button 
(Hmm, I'm not sure requests in and of themselves are popular enough things for this
to matter to be honest, but maybe I'm wrong)

Show list of popular tracks somewhere (finds most popular requests in a way)

Advertise WDTK search queries on TWFY
Advertise alerts on end pages with WDTK

Blog posts / Wikipedia articles about this request
    e.g. http://socialreporter.wordpress.com/2008/04/14/costs-of-the-bbc-action-action-network/
    http://reportr.net/2008/04/24/bbc-spent-6m-to-develop-the-iplayer/
Or just look at referrers as Julian says
Or just don't automate this, keep posting annotations manually.

Catch query parser error, e.g. for this query
    water NOT NEAR "water lane"
Document such errors in acts_as_xapian

It's looking very nice!  I had a look at the M27 request, as per your
earlier email, but I was a bit thrown by the date - is it the 27th
today, or last week, or more recently.  Do you think it would be
worthwhile appending "($days days ago)" to the date of each message,
and "($days days to go)" to the due dates?  Saves people having to
work out (in their heads or otherwise) how long they need to wait for
a response. (Etienne) Use distance_of_time_in_words to do this

Renaming public authorities will break alerts on them.

Compress the emails in the database
Don't store the cached text in backups

Check this again after a while, for dodgy states of events:
s = InfoRequest.find(:all).select { |i| (not i.awaiting_description) and i.get_last_response_event_id and InfoRequestEvent.find(i.get_last_response_event_id).calculated_state != i.described_state }; s.size
- XXXX so when somebody changes waiting description without changing described state doesn't log in event.

Edits to outgoing/incoming/title won't be reindexed in Xapian (maybe just reindex all once a week)
    And maybe edits to prominence, which is more upsetting
    Never updates cached attachment text unless cache is explicitly cleared (which
    might matter with software updates, or code changes)
This does it all:
$ ./script/clear-incoming-text-cache ; ./script/rebuild-xapian-index

Get Atom feed of search results to include stylesheet for highlighting words in
yellow somehow

Interface for when you change your email address - easier to do now with post_redirect.circumstance?

Tell application developer if working days table not up to date, and needs
updating

(10:32:14) richard: you just need to count the number of rows of text and compare it to the number of rows in the textbox
(10:32:29) richard: then increase the height of the textbox by 1em-ish
(10:32:52) Matthew: their function is called autogrow_textarea() by the way, if you just want to look at it...
 thanks :) I won't do it now as there are more important things, I was just accidentally impressed

Properly escape all name_and_email functions
    call our new TMail.Address.encode_quoted_string monkeypatch function

Including 'Request for information' in the subject line of your e-mail will assist us in prioritising your request.
http://www.parliament.uk/parliamentary_publications_and_archives/freedom_of_information_in_the_house_of_lords/lords__foi___how_to_obtain_information.cfm
XXX do we need specifically that text, is it better than "Freedom of Information request" which we put now?
Medway also hint at this with subject= on mailto link

Remove request email address from PDFs (we already do from docs)
   http://www.whatdotheyknow.com/request/cost_of_policing_the_oxford_unio_3
   - maybe if text contains email, refuse to show full PDF just show conversion
     to text/HTML?

Quoting fixing TODO:
    http://www.whatdotheyknow.com/request/35/response/191 # Funny disclaimer
    http://www.whatdotheyknow.com/request/40/response/163 # funny disclaimer
    http://www.whatdotheyknow.com/request/35/response/191 # funny disclaimer "- - Disclaimer - -"

    http://www.whatdotheyknow.com/request/m3_junction_2_eastbound_speed_re # cut here

    http://www.whatdotheyknow.com/request/123/response/184 # nasty nasty formatted quoting 
    http://www.whatdotheyknow.com/request/155/response/552 # nasty nasty formatted quoting
    http://www.whatdotheyknow.com/request/51/response/93 # tough quoting with <
    http://www.whatdotheyknow.com/request/how_do_the_pct_deal_with_retirin_87#incoming-1847
    http://www.whatdotheyknow.com/request/265/response/688 # word wrapping of <

    http://www.whatdotheyknow.com/request/224/response/589 # have knackered the apostrophes here

    Unclassified:
    http://www.whatdotheyknow.com/request/666/response/1020
    http://www.whatdotheyknow.com/request/364/response/1100
    http://www.whatdotheyknow.com/request/council_housing_accommodation # over zealous half cuts
    http://www.whatdotheyknow.com/request/621/response/1131 # virus footer
    http://www.whatdotheyknow.com/request/231/response/338
    http://www.whatdotheyknow.com/request/930/response/1609
    http://www.whatdotheyknow.com/request/1102/response/2067
    http://www.whatdotheyknow.com/request/list_of_public_space_cctv_instal#incoming-2164
    http://www.whatdotheyknow.com/request/errors_in_list_of_postbox_locati#incoming-2272
    http://localhost:3000/request/cctv_data_retention_and_use#incoming-2093
    http://www.whatdotheyknow.com/request/stasi_activity_at_climate_camp#incoming-3362
    http://www.whatdotheyknow.com/request/total_remuneration_and_benefits#incoming-2436
    http://www.whatdotheyknow.com/request/dual_british_and_israeli_nationa#incoming-3461
    http://www.whatdotheyknow.com/request/council_functions_55#incoming-4099
    http://www.whatdotheyknow.com/request/public_safety_consequential_to_c#incoming-1586
    http://www.whatdotheyknow.com/request/functions_council_43#incoming-4509
    http://www.whatdotheyknow.com/request/york_road_tube_re_opening_feasib#incoming-3509
    http://www.whatdotheyknow.com/request/controlled_drinking_zones_5#incoming-4210
    http://www.whatdotheyknow.com/request/road_and_junction_specifications#incoming-3598
    http://www.whatdotheyknow.com/request/disused_live_stations#incoming-4898
    http://www.whatdotheyknow.com/request/errors_in_list_of_postbox_locati#incoming-3577

    http://www.whatdotheyknow.com/request/public_inspection_periods_for_lo_2#outgoing-1707 # square bracket in link
    http://www.whatdotheyknow.com/request/digital_tv_switchover_in_local_a#incoming-4931
    http://www.whatdotheyknow.com/request/local_government_ombudsman_58#incoming-5763

    http://www.whatdotheyknow.com/request/415/response/1041/attach/3/CONF%20FOI%209508%20Ian%20Holton.doc

    http://www.whatdotheyknow.com/request/function_council_88#incoming-6258
    http://www.whatdotheyknow.com/request/please_submit_the_surveyors_repo#incoming-6334 # charset
    http://www.whatdotheyknow.com/request/archive_record#incoming-7514 # charset

    http://www.whatdotheyknow.com/request/enforcement_forders_for_replacin#incoming-6277 # over zealous quoting
    http://www.whatdotheyknow.com/request/renewable_energy_consumption_by # over zealous

Render HTML alternative rather than text (so tables look good) e.g.:
    http://www.whatdotheyknow.com/request/parking_policy
And indeed so links work:
    http://www.whatdotheyknow.com/request/recycling_levels_in_the_winchest

Larger new features
-------------------

Add to calendar links:
like the add to calendar links on here: http://upcoming.yahoo.com/event/33391/
.ics (outlook) would probably be most useful to people i'd guess

Offer option of one RSS feed with all things you are tracking in it. Maybe.

Antispam on contact form

Find a way to get corrected email addresses from responses - somehow getting
user to send them in?  
e.g. as in http://www.whatdotheyknow.com/request/1071/response/1870 which
we found largely by accident.

Rate limit requests using Ratty, with a freeze thing WTT-style, to detect
vexatious requests.

Editable user profile, including photo upload

.tif files are hard for people to view as multi page, consider automatically
separating out the pages as separate links (to .png files or whatever)
    http://www.whatdotheyknow.com/request/windsor_maidenhead_council_commo#incoming-1910
Heck, may as well give thumbnails of all images, indeed all docs while you're at it :)

Julian's PDF excerpting thing for highlighting paragraphs
   and convert Word Docs to PDFs too

Add geographical location to council import
Have a single button to sign up to alerts on all your council PCTs etc.

Holding pen with comments - new requests don't get sent straight away, but are
    delayed while people help improve them.

Screen scrape this and add link to it on the public body page
http://www.ico.gov.uk/Home/tools_and_resources/decision_notices.aspx

Description for each body as to what info it holds
Link to:
    Aliases (not just short name, but multiple real names e.g. for museums)
    Disclosure logs
    Publication schemes (http://www.ico.gov.uk/what_we_cover/freedom_of_information/publication_schemes.aspx)
    TWFY department search
    Complaint email
e.g.
    http://www.ordnancesurvey.co.uk/oswebsite/aboutus/foi/index.html
    http://www.ordnancesurvey.co.uk/oswebsite/aboutus/foi/coiindex.html

Give hotline to call body for extra help
e.g. Advice and assistance in making FoI requests to the House of Lords is available
from the Freedom of Information Officer, Parliamentary Archives, House of
Lords. London SW1A 0PW. Telephone 020 7219 0100. E-mail: foilords@parliament.uk
http://www.parliament.uk/parliamentary_publications_and_archives/freedom_of_information_in_the_house_of_lords/lords__foi___how_to_obtain_information.cfm

EU regulation 1049/2001
US (with Sunlight)

Ask what they learnt from request, and other things?
    and reward by putting their request on front page

OCR all images automatically, even if badly (check for tiffs!)
Maybe use Scrbd's free service :) http://www.scribd.com/paper

Hyperlink Section 1(3) to the act
    http://www.whatdotheyknow.com/request/49/response/86
and to guidance notes
    http://www.ico.gov.uk/what_we_cover/freedom_of_information/guidance.aspx

Only show "is email right" footer the first time a new request is sent to that email?
Show public body email address on their public page, with a link to say "this isn't right!"


