 * Email: angie@mysociety.org; WWW: http://www.mysociety.org
 *
 * $Id: INSTALL.txt,v 1.5 2009-03-03 17:42:41 tony Exp $
 * 


These instructions are based on getting the FOI site up and running on
Ubuntu and/or Debian.

It was last run using the Hardy Heron version of Ubuntu and on the
Parallels debian instance (2.6.18-4-686).

Commands are intended to be run via the terminal or over ssh.

Firstly, in terminal, navigate to the foi folder where this install guide lives.

1. Install the packages that are listed in config/packages using apt-get eg:

sudo apt-get install `cat config/packages`

Some of the required packages only exist in the mysociety debian (or we
have updated versions there), so you will want to add that to your
/etc/apt/sources.list:
  
  deb http://debian.mysociety.org etch main non-free contrib
  deb-src http://debian.mysociety.org etch main non-free contrib


Now we need to set up the database config file to contain the name, username and password of your postgres database.

2: copy database.yml-example to database.yml in foi/config

3: edit it to point to your local postgresql database in the development section and create the databases

NOTES:
su to postgres as a user.

psql template1
   to get into command tool

\l to list databases
    create database foi encoding = 'SQL_ASCII';

if you want to change the password run 
    alter user postgres with password 'newpw';

4: cd ../../mysociety

5: ./bin/rails-post-deploy foi

This will need execture privs so chmod 755 if necessary

6. cd foi/

7 run the following to create the DB.

rake db:migrate

8. Next we need to create the index for the search engine (Xapian) or we'll get problems:
./script/rebuild-xapian-index

9: run the following to get the server running  (may need to chmod 755 again)
./script/server  --environment=development

or if you want the server to be available on the network and not just on localhost tell it your ip address by running
./script/server --environment=development --binding=10.0.0.11 

Obviously change 10.0.0.11 to your own IP address

